!function(){"use strict";const e="header.html",t="footer.html",n="#header-placeholder",o="#footer-placeholder",i="active",a="header--solid",s="header--transparent";function c(){const e=window.location.pathname,t=(e.match(/\//g)||[]).length-1;return e.includes("/servicios/")||t>1?"../components/":"components/"}const r={init:function(){this.loadComponents()},loadComponents:async function(){try{await Promise.all([this.loadHeader(),this.loadFooter()]),this.adjustPaths(),this.initializeHeader(),this.initializeFooter(),this.setActiveNavLink()}catch(e){}},loadHeader:function(){return this.fetchComponent(c()+e,n)},loadFooter:function(){return this.fetchComponent(c()+t,o)},fetchComponent:function(e,t){return new Promise((n,o)=>{const i=document.querySelector(t);i?fetch(e).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.text()}).then(e=>{i.innerHTML=e,n()}).catch(e=>{o(e)}):n()})},initializeHeader:function(){const e=document.getElementById("main-header"),t=document.getElementById("mobile-toggle"),n=document.getElementById("nav-menu"),o=document.getElementById("nav-overlay");if(!e)return;e.classList.add(a),e.classList.remove(s),t&&n&&t.addEventListener("click",()=>{const e=n.classList.toggle("active");t.classList.toggle("active"),t.setAttribute("aria-expanded",e),o&&o.classList.toggle("active"),document.body.style.overflow=e?"hidden":""}),o&&o.addEventListener("click",()=>{this.closeMobileMenu(n,t,o)});document.querySelectorAll(".nav-link:not(.nav-link-dropdown)").forEach(e=>{e.addEventListener("click",()=>{this.closeMobileMenu(n,t,o)})});document.querySelectorAll(".nav-link-dropdown").forEach(e=>{e.addEventListener("click",t=>{if(window.innerWidth<=768){t.preventDefault();e.closest(".nav-dropdown").classList.toggle("active")}})});document.querySelectorAll(".nav-dropdown-menu a").forEach(e=>{e.addEventListener("click",()=>{this.closeMobileMenu(n,t,o)})}),document.addEventListener("keydown",e=>{"Escape"===e.key&&n.classList.contains("active")&&this.closeMobileMenu(n,t,o)})},closeMobileMenu:function(e,t,n){e&&e.classList.remove("active"),t&&(t.classList.remove("active"),t.setAttribute("aria-expanded","false")),n&&n.classList.remove("active"),document.body.style.overflow=""},initializeFooter:function(){const e=document.getElementById("current-year");e&&(e.textContent=(new Date).getFullYear())},adjustPaths:function(){const e=window.location.pathname.includes("/servicios/")?"../":"";if(!e)return;document.querySelectorAll("#header-placeholder a[href], #footer-placeholder a[href]").forEach(t=>{const n=t.getAttribute("href");!n||n.startsWith("http")||n.startsWith("//")||n.startsWith("#")||n.startsWith("tel:")||n.startsWith("mailto:")||n.startsWith("../")||t.setAttribute("href",e+n)})},setActiveNavLink:function(){const e=this.getCurrentPage();document.querySelectorAll(".nav-link[data-page]").forEach(t=>{t.getAttribute("data-page")===e?t.classList.add(i):t.classList.remove(i)})},getCurrentPage:function(){return window.location.pathname.split("/").pop().replace(".html","")||"index"}};document.addEventListener("click",function(e){const t=e.target.closest('a[href^="#"]');if(t){const n=t.getAttribute("href");if("#"!==n){const t=document.querySelector(n);if(t){e.preventDefault();const n=document.querySelector(".header")?.offsetHeight||0,o=t.offsetTop-n;window.scrollTo({top:o,behavior:"smooth"})}}}}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>r.init()):r.init(),window.MESPICComponents=r}();